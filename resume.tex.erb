% !TeX program = xelatex
\documentclass[a4paper]{article}
    \usepackage{fullpage}
    \usepackage{amsmath}
    \usepackage{amssymb}
    \usepackage{textcomp}
    \usepackage{fontspec}
    \usepackage[utf8]{inputenc}
    \usepackage[T1]{fontenc}
    \usepackage{hyperref}
    \usepackage{fancyhdr}
    \textheight=10in
    \raggedright
    \setmainfont{Arimo}
    \setmonofont{Arimo}
    \hypersetup{colorlinks=true,linkcolor=blue,urlcolor=[rgb]{0,0.2,0.6}}
    \thispagestyle{fancy}
    \fancyhf{}
    \renewcommand{\headrulewidth}{0pt}



    %\renewcommand{\encodingdefault}{cg}
%\renewcommand{\rmdefault}{lgrcmr}

\def\bull{\vrule height 0.8ex width .7ex depth -.1ex }

% Initial template generated by https://latexresu.me/
% DEFINITIONS FOR RESUME %%%%%%%%%%%%%%%%%%%%%%%

\newcommand{\area} [2] {
    \vspace*{-9pt}
    \begin{verse}
        \textbf{#1}   #2
    \end{verse}
}

\newcommand{\lineunder} {
    \vspace*{-8pt} \\
    \hspace*{-18pt} \hrulefill \\
}

\newcommand{\header} [1] {
    {\hspace*{-18pt}\vspace*{6pt} \textsc{#1}}
    \vspace*{-6pt} \lineunder
}

\newcommand{\employer} [3] {
    { \textbf{#1} (#2)\\ \underline{\textbf{\emph{#3}}}\\  }
}

\newcommand{\contact} [3] {
    \vspace*{-10pt}
    \begin{center}
        {\Huge \scshape {#1}}\\
        #2 \\ #3
    \end{center}
    \vspace*{-8pt}
}

\newenvironment{achievements}{
    \begin{list}
        {$\bullet$}{\topsep 0pt \itemsep -2pt}}{\vspace*{4pt}
    \end{list}
}

\newcommand{\schoolwithcourses} [4] {
    \textbf{#1} #2 $\bullet$ #3\\
    #4 \\
    \vspace*{5pt}
}

\newcommand{\school} [4] {
    \textbf{#1} #2 $\bullet$ #3\\
    #4 \\
}
% END RESUME DEFINITIONS %%%%%%%%%%%%%%%%%%%%%%%

\newcommand{\github} [1] {\href{https://github.com/#1}{#1}}

    \begin{document}
\vspace*{-40pt}

%==== Profile ====%
\vspace*{-10pt}
\begin{center}
	{\Huge \scshape {<%= data['basics']['name'] %>}}\\ \vspace{4pt}
	\href{https://github.com/dtinth}{@dtinth} $\cdot$ <%= data['basics']['location']['city'] %>, <%= data['basics']['location']['countryCode'] %> $\cdot$ <%= data['basics']['email'] %> $\cdot$ \url{<%= data['basics']['url'] %>}\\
\end{center}

%==== Experience ====%
\header{Work Experience}
\vspace{1mm}

<%
format_date_range = -> start_date, end_date {
    parts = []
    parts << start_date.strftime('%b %Y') if start_date
    parts << (end_date ? end_date.strftime('%b %Y') : 'Present')
    parts.join(' – ')
}
%>

<% data['work'].each do |work| %>
\textbf{<%= work['name'] %>} \hfill <%= work['location'] %>\\
\textit{<%= work['position'] %>} \hfill <%= format_date_range[work['startDate'], work['endDate']] %>\\
\vspace{-1mm}
\begin{itemize} \itemsep 1pt
    <% work['highlights'].each do |highlight| %>
	\item <%= highlight %>
    <% end %>
\end{itemize}
<% end %>


%==== Education ====%
\header{Education}
\vspace{1mm}
<% data['education'].each do |education| %>
\textbf{<%= education['institution'] %>}\\
<%= education['area'] %> \hfill <%= format_date_range[education['startDate'], education['endDate']] %>\\
\vspace{2mm}
<% end %>

\cfoot{\textit{For more software projects, talks, and songs, please check out my website at \url{<%= data['basics']['url'] %>}.}}

% New page
\newpage

\begin{center}
    \textit{The following pages are about what I do outside of work. \\ They are rather long but in case you’re interested…}
\end{center}
\vspace{3mm}


<%
project_types = {
    'community' => 'Community projects',
    'personal' => 'Personal projects',
}
%>

<% project_types.each do |project_type, project_type_name| %>
<% projects = data['projects'].select { |project| project['type'] == project_type } %>
\header{<%= project_type_name %>}
\vspace{1mm}
<% projects.each do |project| %>
\textbf{<%= project['name'] %>}\\
\textit{<%= project['description'] %>}
<% if project['highlights'] && !project['highlights'].empty? %>
\begin{itemize} \itemsep 1pt
    <% project['highlights'].each do |highlight| %>
	\item <%= highlight %>
    <% end %>
\end{itemize}
<% end %>
\vspace{2mm}
<% end %>
<% end %>



\header{Technologies}
<% tech_list = topics.keys.sort.sort_by(&:downcase).reject { |r| r =~ /^_/ } %>
\textit{This is an alphabetical list of technologies, tools, and software that I have some experience with, sourced from my past projects:}

\vspace{2mm}

<%= tech_list * ", " %>.

\vspace{2mm}

<% unfamiliar_tech_list = topics['_Unfamiliar'].keys.sort.sort_by(&:downcase).reject { |r| r =~ /^_/ } %>
\textit{The following technologies are also mentioned in my GitHub repositories, but I haven’t used them enough (or haven’t used them for too long — many technologies on this list are already dead):}

\vspace{2mm}

<%= unfamiliar_tech_list * ", " %>.

\vspace{2mm}

<%#
\header{Skills}
\begin{tabular}{ l l }
	Programming Languages: & A, B \\
	Music:                 & A, B \\
\end{tabular}
\vspace{2mm}

\header{Projects}
{\textbf{Bemuse}} {\sl TypeScript, Node.js} \hfill https://bemuse.ninja\\
blah\\
\vspace*{2mm}
{\textbf{Webring}} {\sl HTML, CSS, JavaScript, Node.js, GitHub Actions, Vercel} \hfill https://webring.wonderful.software/\\
eee\\
\vspace*{2mm}
%>



\ 
\end{document}